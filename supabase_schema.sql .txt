-- Quotes table
create table quotes (
  id uuid primary key default gen_random_uuid (),
  text text not null,
  author text not null,
  category text not null,
  created_at timestamp with time zone default now()
);

-- User favorites
create table favorites (
  id uuid primary key default gen_random_uuid (),
  user_id uuid references auth.users (id) on delete cascade,
  quote_id uuid references quotes (id) on delete cascade,
  created_at timestamp with time zone default now(),
  unique (user_id, quote_id)
);

-- Collections
create table collections (
  id uuid primary key default gen_random_uuid (),
  user_id uuid references auth.users (id) on delete cascade,
  name text not null,
  created_at timestamp with time zone default now()
);

-- Collection quotes
create table collection_quotes (
  id uuid primary key default gen_random_uuid (),
  collection_id uuid references collections (id) on delete cascade,
  quote_id uuid references quotes (id) on delete cascade,
  unique (collection_id, quote_id)
);